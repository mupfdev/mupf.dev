<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:title" content="How to build a low-cost flight simulation rig">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://mupfdev.github.io/xbox-how-to-build-a-low-cost-flight-simulation-rig.html">
    <meta property="og:image" content="https://mupfdev.github.io/img/xbox-1200x1200.png">

    <title>mupf.dev</title>
    <link rel="stylesheet" href="/style.min.css">
    <link rel="stylesheet" href="/mupf.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png?v=2">
    <link rel="manifest" href="/site.webmanifest?v=2">

    <link href="/video-js.min.css" rel="stylesheet">
    <script src="/video.min.js"></script>

    <script src="/minimal-lightbox.min.js"></script>
  </head>

  <body>
    <h1>mupf.dev</h1>

    <p class="author">Michael Fitzmayer <br> August 7th, 2023 <br> Last updated on August 18th, 2023</p>

    <div class="abstract">
      <p>
        An inexpensive entry into the realm of serious flight simulation
        based on Xbox Series S and custom-built peripherals.
      </p>
    </div>

    <h2>How to build a low-cost flight simulation rig</h2>

    <nav class="toc">
      <h2>Contents</h2>
      <ol>
        <li><a href="#introduction">Introduction</a></li>
        <li>
          <a href="#hardware">The Hardware</a>
          <ol>
            <li><a href="#communication">Communication</a></li>
            <li><a href="#autopilot">The Autopilot</a></li>
            <li><a href="#switch-panel">Switches!</a></li>
          </ol>
        </li>
        <li><a href="#conclusion">Conclusion</a></li>
        <li><a href="#postface">Postface</a></li>
      </ol>
    </nav>

    <h3 id="introduction">Introduction</h3>

    <p>
      Ever since I bought my first PC, a Compaq 386, at a garage sale in
      the late 1990s, I have been fascinated by technology and the
      desire to understand it never waned.  Looking over all these
      years, apart from my fascination with programming, there is one
      constant that kept me mesmerised one way or another, and that is
      flight simulation.
    </p>

    <p>
      Starting with Microsoft Flight Simulator 3.0 to 5.0, which were
      already outdated at that time, to titles like Digital
      Integration's <a href="https://github.com/TornadoGame/Tornado">Tornado</a>,
      a technical masterpiece (!), and MicroProse's Falcon series, I
      have always somehow stuck to this genre.
    </p>

    <p>
      Years later I ended up with a full Saitek Cessna Pro Flight rig
      and X-Plane 9.  The simulator never ran particularly well on my
      PC, but in the end I didn't care.<br>

      Eventually the hobby fell by the wayside again.  My own family
      plans came to the fore, so in the end I had the "glorious” idea of
      selling all my equipment on eBay and buy a Switch Lite.  Yes, you
      read that right.  I simply didn't have the time or availability,
      so the equipment ended up gathering dust and taking up the space I
      didn't have.
    </p>

    <p>
      Looking back, it was a very wise decision and I don't regret it.
      Sure, in the years that followed, I always felt like taking up the
      hobby again, but in the end it was very relieving to get rid of
      all the junk in my life.
    </p>

    <p>
      However, as one would expect, I recently felt the need to pick it
      up again.  But where do I start?  A powerful PC is expensive and so
      is flight simulation equipment.  Moreover, I would fall back into
      old patterns by bringing more stuff into my life, things that I
      really didn’t want anymore. That was definitely not an option.
    </p>

    <p>
      After a bit of research, I quickly realised that my best option
      was to buy a second-hand Xbox Series S and Microsoft’s Flight
      Simulator; the price was simply unbeatable!
    </p>

    <p>
      But how does flight simulation fare on the Xbox platform,
      especially if you are seriously interested in the subject matter?
      While researching various online communities, I quickly came
      across the narrative that the Xbox is only a good entry point into
      the realm of flight simulation, a way to pick up the <i>casual
      gamer</i> and prepare them for more.
    </p>

    <p>
      It is after all, a closed, proprietary system with limited
      hardware compatibility and fewer options for customisation than a
      traditional PC.  If you are serious about the hobby, the narrative
      goes that the only logical step you can take is to get a
      full-fledged gaming PC.  As already mentioned, I certainly didn’t
      want that!
    </p>

    <p>
      I mean, after all, it's the same software, just on a different
      platform, right? How hard can it be? That was the moment I decided
      to do what I do best: build it myself! This article is all about
      showing you, the reader, the enthusiast, the gamer, what can be
      done, and how I <i>upcycled</i> defective hardware to get it
      working on my Xbox Series S.
    </p>

    <h3 id="hardware">The Hardware</h3>

    <h4 id="communication">Communication</h4>

    <p>
      At the very beginning, the main question I asked myself was which
      choices I had for communicating with the Xbox.  It was certainly
      not an option to convert an Xbox controller or to adapt compatible
      flight simulation input devices to my preferences.  This would
      have been expensive, unnecessarily complicated and time-consuming,
      however, it seemed possible to connect a keyboard and
      mouse. Perfect!
    </p>

    <p>
      After all, a keyboard is nothing more than a standardised input
      device, so it is reasonable to assume that HID<label for="sn-1"
      class="sidenote-toggle
      sidenote-number"></label><input type="checkbox" id="sn-1"
      class="sidenote-toggle"><span class="sidenote">The USB human
      interface device class (USB HID class) is a part of the USB
      specification for computer peripherals: it specifies a device
      class (a type of computer hardware) for human interface devices
      such as keyboards, mice, game controllers and alphanumeric display
      devices.</span> input devices would be detected by the Xbox.
    </p>

    <p>
      It was worth a shot!  I briefly tried to program a microcontroller
      so that it would be recognised as an HID keyboard and continuously
      sending keystrokes to the host connected to it.  When everything
      worked on my laptop, I connected the device to my Xbox and lo and
      behold, it worked!
    </p>

    <p>
      In a nutshell, HID devices are ideal for this project and are
      infinitely more flexible thanks to microcontrollers.  This even
      works if you connect a regular keyboard in parallel.  Time to get
      started!
    </p>

    <h4 id="autopilot">The Autopilot</h4>

    <p>
      One of the most important instruments in an aircraft is the
      autopilot.  Sure, it's fun to fly an aircraft by hand, but in a
      simulated environment you want to be able to navigate, regardless
      of weather or visibility.  In addition, monitoring individual
      systems can become a complex task, especially if you don't have a
      co-pilot who can take care of it, hence the autopilot function is
      very helpful and its use is also entirely realistic.
    </p>

    <div class="gallery">
      <img class="image-zoom gallery-2x1" src="img/low-cost-flight-rig-01.jpg" alt="Low-cost flight rig, HID-FCU">
      <img class="image-zoom gallery-2x1" src="img/low-cost-flight-rig-02.jpg" alt="Low-cost flight rig, HID-FCU">
    </div>

    <p class="free-standing">
      For this reason, I converted a
      defective <a href="https://www.manson.com.hk/product/ssp-8160/">Manson
      SSP-8160</a> laboratory power supply. I gutted most of it and
      fitted it with an STM32F103 Blue Pill microcontroller board. I
      replaced the 7-segment displays
      with <a href="https://tasmota.github.io/docs/TM163x/">TM1637</a>-based
      equivalents, attached new rotary encoders and only reused
      the <a href="http://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcMBMcUHYMGZIA4UA2ATmIxAUgoqoQFMBaMMAKAHcRCAWWsFEDJC4U+UdiGz80eEHirSxAJ1nz84FDIWq4LZRgT8Eoub37bI4wcKP8rILtyUCh9x3a5hCUECjQW9Lth4wnbY2F5UXIIWHO6ezsI8VDEJ9nCpQcIpoeEZaGKxgfmhLv4ZLnYoCBESxNkuVV6VavXCCsGaLeIdPmo9ksndXDLhMj1cxBGWLjYCBiJmLAAuKqaywwveEDAIGGAGCJLBQdUOUNCERoTYxNiHmcH7yFQAJnQAZgCGAK4ANkssTz8fr5fqETQgN5fP5LBi-OgvcDeZKwVgrMAYLwKXxtFpImCERCHLgIYZ4fYYPDYc6XDBVDHYPbhLjYM5gdJQn7-cR8ToyDFYrqFRLpBDEfhJMQAZ02krFEvSVAgX1+Uro4hxPhQbW1aUGHE1ctEkpShvSkj1BXWMgMYw21X11oohNkk2djrwbodrq8ng9br9WuEgdNusDmrA4rEaHIFslFruEpAAHtFJ8AHYAc3VMYkUjUFsDwgARr9vjnIOR4-lJZgkwAHb6Kevwli57hrXZeWbCACS6cbAOL9jdo9E3EWHGrVFC+QsuYmXjdi7z9hAAHl0wBjOgAHSl71T+7oADc6IoAJ77gCWA++ANzDDkIDdT8iMmEAGFkwBbH-J9N90PRR90+X5fhvO8lilFhMxABgNg8LwEI-C1BgAJTzKhcGEAYfDpZE0moZJzgQFhhyYQhyGIRJdgoKMLAAZUtPDWLnJEVTVbwUBYZi43SFDLRIzi6G43jVwUQStA4sCuPkWD4I2TUpJ4ZEFNY3JWPmDDFJGYJdIkbTvFU7BoGpEidhYTDBMjfgbJdEiTLMwjLPrThVNmDsKExCQ1Lgryu3c2gGLEIA">original
      key matrix</a> and main power switch.
    </p>

    <div class="gallery">
      <img class="image-zoom gallery-3x1" src="img/low-cost-flight-rig-03.jpg" alt="Low-cost flight rig, HID-FCU">
      <img class="image-zoom gallery-3x1" src="img/low-cost-flight-rig-04.jpg" alt="Low-cost flight rig, HID-FCU">
      <img class="image-zoom gallery-3x1" src="img/low-cost-flight-rig-05.jpg" alt="Low-cost flight rig, HID-FCU">
    </div>

    <p class="free-standing">
      The design is roughly based on
      the <a href="https://www.bendixking.com/content/dam/bendixking/en/documents/document-lists/downloads-and-manuals/006-18034-0000-KAP-140-Pilots-Guide.pdf">KAP
      140 autopilot system</a> from Bendix/King, which is used in many
      aircrafts, including my personal favorite,
      the <a href="https://www.youtube.com/watch?v=__hxwFZXF-s">Pilatus
      PC-6 Turbo-Porter</a>.
    </p>

    <div class="gallery">
      <img class="image-zoom" src="img/bendix-king-kap-140-autopilot-msfs.png" alt="Bendix/King KAP 140 autopilot system, MSFS">
    </div>

    <p class="free-standing">
      The boot-up phase and the behavior of the firmware is modelled
      after the version used by
      the <a href="https://blackbirdsims.com/flight/PG.php?id=74">Pilatus
      Porter PC-6 by Blackbird Simulations</a>.  In addition, since
      there is no way to read data back from the simulator, there is
      also the option to change the state of the device without sending
      keystrokes to the Xbox.  This is very useful when the simulator
      and the device are out of sync.  This is rarely necessary, but it
      does happen.
    </p>

    <div class="media-container">
      <video
        id="hid-fcu-preview-1"
        class="video-js"
        controls
        preload="auto"
        poster="img/flight-rig-hid-fcu-01-tn.png"
        data-setup='{"fluid": true}'>
        <source src="media/flight-rig-hid-fcu-01.webm" type="video/webm">
        <p class="vjs-no-js">
          To view this video please enable JavaScript, and consider
          upgrading to a web browser that
          <a href="https://videojs.com/html5-video-support/" target="_blank">
            supports HTML5 video
          </a>
        </p>
      </video>
      <p class="caption">
        HID-FCU, basic usage.
        Download: <a href="media/flight-rig-hid-fcu-01.webm">webm</a>
      </p>
    </div>

    <p>
      Thanks to a custom keyboard profile, the operation is surprisingly
      pleasant.  The entire autopilot, including vertical and lateral
      navigation, works flawlessly and the haptics provide perfect
      immersion. It makes a huge difference whether operating the
      autopilot virtually, or configuring it manually, as if you were
      sitting right in the cockpit.  I have already successfully
      completed several flights using it, with hardly any difficulties
      worth mentioning.
    </p>

    <div class="media-container">
      <video
        id="hid-fcu-preview-2"
        class="video-js"
        controls
        preload="auto"
        poster="img/flight-rig-hid-fcu-02-tn.png"
        data-setup='{"fluid": true}'>
        <source src="media/flight-rig-hid-fcu-02.webm" type="video/webm">
        <p class="vjs-no-js">
          To view this video please enable JavaScript, and consider
          upgrading to a web browser that
          <a href="https://videojs.com/html5-video-support/" target="_blank">
            supports HTML5 video
          </a>
        </p>
      </video>
      <p class="caption">
        HID-FCU, lateral and vertical navigation.
        Download: <a href="media/flight-rig-hid-fcu-02.webm">webm</a>
      </p>
    </div>

    <p>
      Overall, the whole project is very much tailored to my individual
      needs, and without further customization, an exact replica would
      probably not make much sense, especially since it is quite
      undocumented. Nevertheless, it provides a fairly stable basis for
      designing your own hardware. For this reason I have uploaded the
      complete source code to
      GitHub: <a href="https://github.com/mupfdev/Xbox-Flight-Simulation-Rig">Xbox-Flight-Simulation-Rig</a>
    </p>

    <h4 id="switch-panel">Switches!</h4>

    <p>
      Anyone who has ever sat in a cockpit or is simply interested in
      aviation knows exactly: without switches, an airplane is not an
      airplane.  They are part of it, they serve a purpose, and where
      you find one, there are generally plenty more.  The Pilatus PC-6
      is no exception.  For this reason, it was only logical to design a
      switch board.
    </p>

    <p>
      I set myself the following goals:
    </p>

    <ul>
      <li>
        Since the switches control much of the aircraft, including
        powering the autopilot, the panel should not become a
        stand-alone input device.
      </li>
      <li>
        It must remain affordable and cost only a fraction compared to
        proprietary hardware.
      </li>
      <li>
        The design is to resemble the autopilot and the layout of the
        switches is supposed to be based on the one installed in the
        Pilatus PC-6.  However, elegance is supposed to take precedence
        over authenticity.
      </li>
    </ul>

    <p>
      The first problem to be solved was the number of switches. I
      didn't want to waste 16 GPIO pins on the microcontroller, if I
      even had that many available. Besides, that would have become a
      problem as well, since I wanted to connect the panel to the
      autopilot using a cable.
    </p>

    <p>
      I found a simple solution and decided to use
      the <a href="https://www.ti.com/lit/ds/symlink/pcf8574.pdf">PCF8574
      8-bit I/O Expander for I²C Bus</a>.  This chip was cheaply
      available as a readily assembled module.  These modules can be
      connected in series to control up to 64 GPIO pins per I²C
      bus. Perfect!
    </p>

    <div class="gallery">
      <img class="image-zoom gallery-3x1" src="img/low-cost-flight-rig-06.jpg" alt="Low-cost flight rig, switch panel">
      <img class="image-zoom gallery-3x1" src="img/low-cost-flight-rig-07.jpg" alt="Low-cost flight rig, switch panel">
      <img class="image-zoom gallery-3x1" src="img/low-cost-flight-rig-08.jpg" alt="Low-cost flight rig, switch panel">
    </div>

    <p class="free-standing">
      I used a case from Abox as the base and replaced the front panel
      with a 3D print.  However, sooner or later I will replace this
      again with the supplied aluminum plate.  It is simply more durable
      and withstands the mechanical load of the switches much better.
      To make the front a bit more visually appealing, I covered it with
      cut vinyl sheet, just like on the autopilot.
    </p>

    <div class="gallery">
      <img class="image-zoom gallery-2x1" src="img/low-cost-flight-rig-09.jpg" alt="Low-cost flight rig, switch panel">
      <img class="image-zoom gallery-2x1" src="img/low-cost-flight-rig-10.jpg" alt="Low-cost flight rig, switch panel">
    </div>

    <p class="free-standing">
      Here is a short demonstration of the current setup with autopilot
      and switch panel:
    <p>

    <div class="media-container">
      <video
        id="switch-panel-preview-1"
        class="video-js"
        controls
        preload="auto"
        poster="img/flight-rig-switch-panel-01-tn.png"
        data-setup='{"fluid": true}'>
        <source src="media/flight-rig-switch-panel-01.webm" type="video/webm">
        <p class="vjs-no-js">
          To view this video please enable JavaScript, and consider
          upgrading to a web browser that
          <a href="https://videojs.com/html5-video-support/" target="_blank">
            supports HTML5 video
          </a>
        </p>
      </video>
      <p class="caption">
        Switch Panel, demo video.
        Download: <a href="media/flight-rig-switch-panel-01.webm">webm</a>
      </p>
    </div>

    <h3 id="conclusion">Conclusion</h3>

    <p>
      For flight simulator enthusiasts, the Xbox Series S is an
      unbeatable alternative to a PC. Sure, there is no possibility to
      fly on networks like <a href="https://vatsim.net/">VATSIM</a> as
      of today, but for all those who can live with this trade-off, I
      can highly recommend it. In addition, it hardly takes up any space
      and can be expanded with your own peripherals, relatively easily
      and inexpensively, due to its compatibility with the HID standard.
    </p>

    <p>
      I am very happy with the results so far and I'm looking forward to
      adding more custom built hardware to the rig (which I will of
      course document in this article).  More than anything though, I’m
      hoping that this way I’ll be able to create more interest in
      cockpit building, among Xbox users.  Just be creative, look twice
      at dusty consumer electronics or mundane objects and think about
      how they could be integrated into a cockpit.  You will suddenly
      see things around you from a completely new perspective and a
      little creativity provides seemingly endless possibilities.  Happy
      hacking!
    </p>

    <h3 class="free-standing" id="postface">Postface</h3>

    <p>
      I hope you enjoyed this article.  If not, let me know – I welcome
      constructive feedback to improve the quality of my content.  If
      you are interested in flight simulation or if this article has
      piqued your interest, you are cordially invited to visit me
      online. Besides on
      the <a href="https://discord.st/thepilotclub">The Pilot Club</a>,
      you can also find me on the
      <a href="https://discord.gg/nb4Sh9sYAX">cruiselevel.de</a> Discord
      server, the German-speaking community around flight simulation.
      My Discord handle
      is <a href="https://discordapp.com/users/362615994226573313">mupf.dev</a>.
    </p>

    <p>
      I would like to thank salud, and also my friend Razvan, for all
      the time they spent proofreading this article.  I really do
      appreciate it!
    </p>

    <p>
      <a href="/">Go back</a>
    </p>
  </body>
</html>
